<!DOCTYPE html>
<html>

<head>
    <title>Fornecedores</title>
    <link rel="stylesheet" href="/stylesheets/header.css">
    <link rel="icon" href="/images/wokyera_logo.jpg">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
        integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="
        crossorigin="anonymous"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.0/mdb.min.css" rel="stylesheet" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.0/mdb.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        table.dataTable thead .sorting:after,
        table.dataTable thead .sorting:before,
        table.dataTable thead .sorting_asc:after,
        table.dataTable thead .sorting_asc:before,
        table.dataTable thead .sorting_asc_disabled:after,
        table.dataTable thead .sorting_asc_disabled:before,
        table.dataTable thead .sorting_desc:after,
        table.dataTable thead .sorting_desc:before,
        table.dataTable thead .sorting_desc_disabled:after,
        table.dataTable thead .sorting_desc_disabled:before {
            bottom: .5em;
        }
    </style>
</head>

<body>
    <%- include('../__header_geral') %>

        <div class="container">
            <div class="row">
                <div class="col-md-11">
                    <h1 class="mt-3">Fornecedores</h1>
                </div>
            </div>

            <!-- Suppliers -->
            <div style="display: flex; justify-content: center;">
                <div class="col-xl-4 col-sm-6 col-12 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between px-md-1">
                                <div>
                                    <h3 class="text-secondary">
                                        <%= suppliers.length %>
                                    </h3>
                                    <p class="mb-0">Fornecedores</p>
                                </div>
                                <div class="align-self-center">
                                    <i class="fas fa-handshake text-secondary fa-3x"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Suppliers Table -->
            <table class="table align-middle mb-3 bg-white table-hover table-striped">
                <thead>
                    <tr class="text-center">
                        <th class="col-md-1">#ID
                        </th>
                        <th class="col-md-1">NIF/NIPC
                        </th>
                        <th class="col-md-2">Nome
                        </th>
                        <th class="col-md-1">País
                        </th>
                        <th class="col-md-4">Morada
                        </th>
                        <th class="col-md-3">Contacto
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <% suppliers.forEach(supplier=> { %>
                        <tr>
                            <td class="text-center">
                                <%= supplier.id %>
                            </td>
                            <th class="text-center">
                                <%= supplier.tax_registration_number %>
                            </th>
                            <td>
                                <%= supplier.business_name %>
                            </td>
                            <td class="text-center"><img src="https://flagcdn.com/w40/<%= supplier.tax_country_region.toLowerCase() %>.png"
                                    alt="país"></td>
                            <td>
                                <%= supplier.address.address != '' ? supplier.address.address : 'NaN' %>
                                <br>
                                <%= supplier.address.postalcode != '' ? supplier.address.postalcode : '0000-000' %>
                                <%= supplier.address.city != '' ? supplier.address.city : 'NaN' %>
                                <%= supplier.tax_country_region %>
                            </td>
                            <td>
                                <small class="text-muted">
                                    <span class="badge badge-success">
                                        <%= supplier.contact.position != '' ? supplier.contact.position : 'Dep. Vendas' %>
                                    </span>
                                    <br>
                                    <small><strong>NOME</strong></small> <%= supplier.contact.name != '' ? supplier.contact.name : 'NaN' %>
                                    <br>
                                    <small><strong>EMAIL</strong></small> <%= supplier.contact.email != '' ? supplier.contact.email : 'NaN' %>
                                    <br>
                                    <small><strong>F</strong></small> <%= supplier.contact.phone != '' ? supplier.contact.phone : 'null' %> | <small><strong>M</strong></small> <%= supplier.contact.mobile %>
                            </small>
                            </td>
                        </tr>
                        <% }); %>

            </table>
        </div>

        <%- include('../__footer') %>

</body>